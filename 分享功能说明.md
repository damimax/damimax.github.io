# 分享功能使用说明

## 功能概述

本网站已集成智能分享功能，旨在诱导用户使用浏览器原生分享API，提升网站传播效果。

## 主要特性

### 1. 智能分享按钮
- **位置**: 页面右下角固定位置
- **样式**: 渐变背景，悬浮效果
- **功能**: 点击触发分享提示

### 2. 自动分享提示
- **触发时机**: 页面加载3秒后自动显示
- **显示条件**: 仅在倒计时剩余15天或更少时显示
- **内容**: 包含紧迫感描述、剩余天数和分享号召

### 3. 多平台兼容
- **原生分享**: 支持 `navigator.share()` API 的浏览器
- **应用内浏览器**: 提示用户在浏览器中打开
- **移动端降级**: 不支持原生分享时自动复制链接
- **桌面端降级**: 显示链接模态框供用户复制

## 技术实现

### 核心文件
- `js/share.js` - 分享功能逻辑
- `css/share.css` - 分享界面样式

### 分享数据配置
```javascript
{
  title: '郑州 · 龙湖熙上 | 二期合同交付倒计时',
  text: '时间正一分一秒地紧迫流逝，交付若不达标，我们绝不妥协，必捍卫合法权益。',
  url: window.location.href
}
```

## 用户体验流程

### 1. 首次访问
1. 页面加载完成
2. 检查倒计时剩余天数
3. 如果剩余15天或更少，3秒后显示重要提醒弹窗
4. 用户可选择"立即分享"或"我知道了"

### 2. 分享操作
1. 点击右下角分享按钮
2. 显示分享提示框
3. 根据浏览器环境：
   - **支持原生分享**: 调用系统分享菜单
   - **应用内浏览器**: 提示在浏览器中打开后点击分享按钮
   - **移动端降级**: 复制链接到剪贴板
   - **桌面端降级**: 显示链接模态框

### 3. 成功反馈
- 分享成功: 显示"分享成功！感谢您的支持"
- 复制成功: 显示"链接已复制到剪贴板"

## 浏览器兼容性

### 支持原生分享的浏览器
- ✅ Chrome (Android)
- ✅ Safari (iOS)
- ✅ Edge (Windows)
- ✅ Firefox (Android)

### 应用内浏览器（需要外部浏览器）
- ⚠️ 微信内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮
- ⚠️ QQ内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮
- ⚠️ 微博内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮
- ⚠️ 抖音内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮
- ⚠️ 支付宝内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮
- ⚠️ 钉钉内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮
- ⚠️ 飞书内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮
- ⚠️ 企业微信内置浏览器 → 点击右上角 ⋯ → 在浏览器中打开 → 点击右下角分享按钮

### 不支持原生分享的浏览器
- ❌ Chrome (桌面版)
- ❌ Firefox (桌面版)
- ❌ Safari (桌面版)

## 样式特性

### 响应式设计
- 移动端优化布局
- 自适应按钮大小
- 触摸友好的交互

### 视觉效果
- 渐变背景
- 悬浮动画
- 平滑过渡
- 深色模式支持

## 自定义配置

### 修改分享内容
在 `js/share.js` 中修改 `shareData` 对象：

```javascript
this.shareData = {
  title: '自定义标题',
  text: '自定义描述',
  url: window.location.href
};
```

### 修改倒计时判断条件
在 `shouldShowImportantPrompt()` 方法中修改天数判断：

```javascript
shouldShowImportantPrompt() {
  const remainingDays = this.getRemainingDays();
  return remainingDays <= 15 && remainingDays > 0; // 修改15为其他天数
}
```

### 添加应用内浏览器检测
在 `isInAppBrowser()` 方法中添加新的应用检测：

```javascript
isInAppBrowser() {
  const userAgent = navigator.userAgent.toLowerCase();
  return userAgent.includes('micromessenger') || // 微信
         userAgent.includes('weibo') || // 微博
         userAgent.includes('qq/') || // QQ
         // 添加更多应用...
}
```

### 调整显示时机
修改 `showInitialPrompt()` 中的延迟时间：

```javascript
setTimeout(() => {
  this.showInitialPrompt();
}, 3000); // 修改为所需延迟时间
```

### 样式定制
在 `css/share.css` 中修改相关样式类。

## 注意事项

1. **HTTPS要求**: 原生分享API需要HTTPS环境
2. **用户权限**: 分享功能需要用户主动触发
3. **倒计时判断**: 重要提醒仅在剩余15天或更少时显示
4. **降级处理**: 确保在不支持的环境中也有备用方案
5. **错误处理**: 完善的错误处理机制，避免JavaScript错误
6. **兼容性**: 支持现代和传统浏览器的剪贴板操作
7. **按钮隐藏**: 分享按钮隐藏不持久化，刷新页面后重新显示

## 测试建议

### 测试环境
- 移动设备浏览器
- 桌面浏览器（测试降级方案）
- 不同网络环境

### 测试要点
1. 分享按钮显示和交互
2. 自动提示的显示和关闭
3. 原生分享功能调用
4. 链接复制功能
5. 成功消息显示
6. 响应式布局适配
7. 错误处理机制
8. 浏览器兼容性

### 测试页面
可以使用 `test-share.html` 页面来测试分享功能的兼容性和错误处理。

## 性能优化

- 延迟加载分享功能
- 使用CSS动画提升体验
- 最小化DOM操作
- 合理的事件监听器管理 